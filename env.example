##############################################
# SOCANA — env.example
# Скопируй в .env и заполни значения.
# Принцип: чем меньше параметров трогаешь — тем стабильнее.
##############################################

# ===== IMAP (почта Kaspersky) =====
# IMAP сервер. Для Timeweb обычно: imap.timeweb.ru
IMAP_HOST=imap.timeweb.ru
# Порт IMAP over SSL. Обычно 993.
IMAP_PORT=993
# Логин IMAP (часто это полный email).
IMAP_USERNAME=your_imap_login
# Пароль IMAP (или app-password, если включена 2FA).
IMAP_PASSWORD=your_imap_password
# Фильтр отправителя: SOCANA читает только письма от этого FROM.
# Для Kaspersky Cloud: cloud_noreply@kaspersky.com
IMAP_FROM_FILTER=cloud_noreply@kaspersky.com
# Папка/ящик IMAP. Обычно INBOX. Если алерты попадают в отдельную папку — укажи её имя.
IMAP_MAILBOX=INBOX
# ACK обработанных писем:
# - true  -> после успешной обработки SOCANA выставит \\Seen (UNSEEN больше не будет их видеть)
# - false -> удобно для отладки, но в проде может приводить к повторному чтению одних и тех же писем
IMAP_MARK_SEEN=true
# Интервал проверки IMAP в секундах.
# Рекомендации:
# - prod: 60–180
# - test: 10–30
# Минимум в коде = 5 (защита от слишком частого polling).
IMAP_POLL_INTERVAL_SECONDS=60

# ===== TELEGRAM =====
# Токен бота от BotFather (формат: 123456:ABCDEF...)
TELEGRAM_BOT_TOKEN=123456:ABCDEF
# Куда всегда отправлять алерты админам (чат/группа/канал).
# Если пусто — SOCANA не отправляет уведомления, но продолжает парсить и писать в БД.
# Как узнать chat_id: `python main.py get-updates` (после того, как ты напишешь боту любое сообщение).
TELEGRAM_CHAT_ID=
# Админы SOCANA (user_id Telegram через запятую).
# Только эти люди могут:
# - открывать /assets
# - привязывать владельца к хосту (Bind owner)
# - видеть "Подробности" (raw email)
# Как узнать user_id: пользователь пишет боту /start и видит user_id в ответе.
# Пример: "123456789,987654321"
TELEGRAM_ADMIN_USER_IDS=

# --- Advanced / optional (обычно НЕ нужно для “просто и безопасно”) ---
# Дополнительные admin chat_id (через запятую).
# Если заполнено, алерты будут отправляться:
# - в TELEGRAM_CHAT_ID (если он задан)
# - и во все чаты из TELEGRAM_ADMIN_CHAT_IDS
# Удобно, если нужно “в группу SOC” + “в личку админу”.
# Пример: "-1001234567890,123456789"
TELEGRAM_ADMIN_CHAT_IDS=
# Глобальный allow-list user_id (через запятую).
# ВНИМАНИЕ: если заполнить, можно случайно запретить пользователям писать /start (и они не смогут получить свой user_id).
# Поэтому в режиме “просто и безопасно” оставляй пустым.
TELEGRAM_ALLOWED_USER_IDS=

# ===== DATABASE =====
# Путь к SQLite файлу SOCANA.
# Рекомендуется абсолютный путь (чтобы systemd всегда находил БД).
SQLITE_PATH=/home/ezovskikh_a/apps/socana/socana.sqlite3

# ===== DEDUP / ANTI-SPAM =====
# Окно дедупликации (сек).
# Если приходит повтор одного и того же события (по fingerprint) в течение окна — SOCANA не спамит, а увеличивает счетчик повторов.
ANTI_SPAM_WINDOW_SECONDS=600
# Порог повторов: когда повторов накопилось >= порога, SOCANA может отправить “burst” уведомление (счетчик повторов растёт).
# Рекомендации:
# - 3   (prod, сбалансировано)
# - 10+ (очень шумная среда)
ANTI_SPAM_REPEAT_THRESHOLD=3

# ===== AI =====
# Включить CrewAI/LLM обогащение (true/false).
# Если false — SOCANA работает rules-first (без LLM).
ENABLE_LLM=false
# OpenAI API key. Нужен только если ENABLE_LLM=true.
OPENAI_API_KEY=
# Модель OpenAI. Можно оставить по умолчанию и менять при необходимости.
OPENAI_MODEL=gpt-5-mini-2025-08-07
# Путь к YAML с промптами CrewAI (опционально).
# Если пусто — используется `soc_core/prompts.yaml`.
PROMPTS_PATH=

# ===== Web research tools (optional) =====
# Опционально. Нужны только для web-enrichment (Threat Researcher агент):
# - Serper: `https://serper.dev/` (Google Search API)
# - Tavily: `https://tavily.com/` (Search API)
# Если ключи пустые — web search просто не используется.
SERPER_API_KEY=
TAVILY_API_KEY=

# ===== LOGGING =====
# Уровень логов: DEBUG / INFO / WARNING / ERROR
LOG_LEVEL=INFO